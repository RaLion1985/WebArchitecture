userController
Спаггети код - ветвления Строки 20-37

а так-же Лазанья код - который по моему мнению оправдан строки 22-23 ,53 (облегчают понимание происходящего)

По моему мнению в Repository/ProductRepository наблюдается Полтергейст, либо я не правильно определил, но обращение идет напрямую к данным, необходимо создать конструктор с описанием параметров для более удобного обращения к массиву через класс